<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GestorFederal - Sistema de Control de Tiempos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, -apple-system, sans-serif; }
    </style>
</head>
<body>
    <div id="app"></div>
    
    <script>
        // ===================== ESTADO GLOBAL =====================
        let state = {
            currentUser: null,
            users: [{ id: 1, username: 'admin', password: 'admin123', role: 'admin', name: 'Administrador' }],
            activeTimers: {},
            authCodes: {},
            timeRecords: [],
            actas: [],
            comunicados: [],
            view: 'login',
            timerInterval: null
        };

        // Cargar datos del localStorage
        function loadData() {
            const saved = localStorage.getItem('gestorFederalData');
            if (saved) {
                const data = JSON.parse(saved);
                state.users = data.users || state.users;
                state.authCodes = data.authCodes || {};
                state.timeRecords = data.timeRecords || [];
                state.actas = data.actas || [];
                state.comunicados = data.comunicados || [];
            }
        }

        // Guardar datos en localStorage
        function saveData() {
            localStorage.setItem('gestorFederalData', JSON.stringify({
                users: state.users,
                authCodes: state.authCodes,
                timeRecords: state.timeRecords,
                actas: state.actas,
                comunicados: state.comunicados
            }));
        }

        // ===================== UTILIDADES =====================
        function formatTime(seconds) {
            const h = Math.floor(seconds / 3600);
            const m = Math.floor((seconds % 3600) / 60);
            const s = seconds % 60;
            return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        // ===================== FUNCIONES DE NEGOCIO =====================
        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            const user = state.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                state.currentUser = user;
                if (user.role === 'admin') state.view = 'admin-dashboard';
                else if (user.role === 'alto') state.view = 'alto-dashboard';
                else state.view = 'bajo-dashboard';
                
                // Iniciar intervalo del cron√≥metro
                if (!state.timerInterval) {
                    state.timerInterval = setInterval(() => {
                        Object.keys(state.activeTimers).forEach(userId => {
                            if (state.activeTimers[userId].isRunning) {
                                state.activeTimers[userId].elapsed++;
                            }
                        });
                        if (state.view.includes('dashboard')) render();
                    }, 1000);
                }
                
                render();
            } else {
                alert('Usuario o contrase√±a incorrectos');
            }
        }

        function logout() {
            state.currentUser = null;
            state.view = 'login';
            render();
        }

        function createUser(e) {
            e.preventDefault();
            const name = document.getElementById('newUserName').value;
            const username = document.getElementById('newUsername').value;
            const password = document.getElementById('newPassword').value;
            const role = document.getElementById('newRole').value;
            
            if (state.users.find(u => u.username === username)) {
                alert('El usuario ya existe');
                return;
            }
            
            state.users.push({
                id: state.users.length + 1,
                username,
                password,
                role,
                name
            });
            
            saveData();
            alert('Usuario creado exitosamente');
            render();
        }

        function generateAuthCode() {
            const code = Math.random().toString(36).substring(2, 8).toUpperCase();
            state.authCodes[code] = {
                cargoAltoId: state.currentUser.id,
                cargoAltoName: state.currentUser.name,
                createdAt: new Date().toISOString(),
                usedBy: []
            };
            saveData();
            alert(`C√≥digo generado: ${code}`);
            render();
        }

        function startTimer() {
            const code = document.getElementById('authCodeInput').value.toUpperCase();
            if (!code || !state.authCodes[code]) {
                alert('C√≥digo de autorizaci√≥n inv√°lido');
                return;
            }

            state.activeTimers[state.currentUser.id] = {
                elapsed: 0,
                isRunning: true,
                startTime: new Date().toISOString(),
                cargoAltoId: state.authCodes[code].cargoAltoId,
                cargoAltoName: state.authCodes[code].cargoAltoName,
                authCode: code
            };
            
            state.authCodes[code].usedBy.push(state.currentUser.id);
            saveData();
            render();
        }

        function toggleTimer() {
            if (state.activeTimers[state.currentUser.id]) {
                state.activeTimers[state.currentUser.id].isRunning = !state.activeTimers[state.currentUser.id].isRunning;
                render();
            }
        }

        function stopTimer() {
            const timer = state.activeTimers[state.currentUser.id];
            if (timer) {
                const totalSeconds = timer.elapsed;
                const totalMinutes = Math.floor(totalSeconds / 60);
                const hours = Math.floor(totalMinutes / 60);
                const minutes = totalMinutes % 60;

                state.timeRecords.push({
                    id: state.timeRecords.length + 1,
                    userId: state.currentUser.id,
                    userName: state.currentUser.name,
                    cargoAltoId: timer.cargoAltoId,
                    cargoAltoName: timer.cargoAltoName,
                    totalSeconds,
                    hours,
                    minutes,
                    date: new Date().toISOString(),
                    authCode: timer.authCode
                });

                delete state.activeTimers[state.currentUser.id];
                saveData();
                alert(`Tiempo registrado: ${hours}h ${minutes}m`);
                render();
            }
        }

        function stopUserTimer(userId) {
            const timer = state.activeTimers[userId];
            if (timer) {
                const totalSeconds = timer.elapsed;
                const totalMinutes = Math.floor(totalSeconds / 60);
                const hours = Math.floor(totalMinutes / 60);
                const minutes = totalMinutes % 60;
                const user = state.users.find(u => u.id === parseInt(userId));

                state.timeRecords.push({
                    id: state.timeRecords.length + 1,
                    userId: parseInt(userId),
                    userName: user.name,
                    cargoAltoId: timer.cargoAltoId,
                    cargoAltoName: timer.cargoAltoName,
                    totalSeconds,
                    hours,
                    minutes,
                    date: new Date().toISOString(),
                    authCode: timer.authCode,
                    stoppedBy: state.currentUser.name
                });

                delete state.activeTimers[userId];
                saveData();
                alert(`Tiempo de ${user.name} detenido: ${hours}h ${minutes}m`);
                render();
            }
        }

        function addManualTime(e) {
            e.preventDefault();
            const userId = parseInt(document.getElementById('manualUserId').value);
            const hours = parseInt(document.getElementById('manualHours').value) || 0;
            const minutes = parseInt(document.getElementById('manualMinutes').value) || 0;
            
            const user = state.users.find(u => u.id === userId);
            const totalSeconds = (hours * 3600) + (minutes * 60);

            state.timeRecords.push({
                id: state.timeRecords.length + 1,
                userId,
                userName: user.name,
                cargoAltoId: state.currentUser.id,
                cargoAltoName: state.currentUser.name,
                totalSeconds,
                hours,
                minutes,
                date: new Date().toISOString(),
                manual: true,
                addedBy: state.currentUser.name
            });

            saveData();
            alert(`Tiempo manual agregado: ${hours}h ${minutes}m a ${user.name}`);
            render();
        }

        function createActa(e) {
            e.preventDefault();
            const targetUserId = parseInt(document.getElementById('actaUserId').value);
            const motivo = document.getElementById('actaMotivo').value;
            const targetUser = state.users.find(u => u.id === targetUserId);

            state.actas.push({
                id: state.actas.length + 1,
                targetUserId,
                targetUserName: targetUser.name,
                motivo,
                createdBy: state.currentUser.name,
                createdById: state.currentUser.id,
                createdAt: new Date().toISOString()
            });

            saveData();
            alert('Acta administrativa creada');
            render();
        }

        function createComunicado(e) {
            e.preventDefault();
            if (state.comunicados.length >= 10) {
                alert('M√°ximo 10 comunicados activos');
                return;
            }

            const titulo = document.getElementById('comTitulo').value;
            const contenido = document.getElementById('comContenido').value;
            const urgente = document.getElementById('comUrgente').checked;

            state.comunicados.push({
                id: state.comunicados.length + 1,
                titulo,
                contenido,
                urgente,
                createdBy: state.currentUser.name,
                createdAt: new Date().toISOString()
            });

            saveData();
            alert('Comunicado creado');
            render();
        }

        function deleteComunicado(id) {
            state.comunicados = state.comunicados.filter(c => c.id !== id);
            saveData();
            render();
        }

        function calculateCargoAltoHours() {
            const stats = {};
            state.timeRecords.forEach(record => {
                if (!record.cargoAltoId) return;
                if (!stats[record.cargoAltoId]) {
                    stats[record.cargoAltoId] = {
                        name: record.cargoAltoName,
                        totalMinutes: 0,
                        pendingMinutes: 0,
                        completedHours: 0
                    };
                }
                const totalMinutes = Math.floor(record.totalSeconds / 60);
                stats[record.cargoAltoId].totalMinutes += totalMinutes;
                const currentPending = stats[record.cargoAltoId].pendingMinutes;
                const newTotal = currentPending + totalMinutes;
                const completedHours = Math.floor(newTotal / 60);
                const remainingMinutes = newTotal % 60;
                stats[record.cargoAltoId].completedHours += completedHours;
                stats[record.cargoAltoId].pendingMinutes = remainingMinutes;
            });
            return Object.entries(stats).map(([id, data]) => ({ id, ...data }));
        }

        // ===================== VISTAS =====================
        function LoginScreen() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 flex items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md">
                        <div class="text-center mb-8">
                            <h1 class="text-4xl font-bold text-blue-900 mb-2">GestorFederal</h1>
                            <p class="text-gray-600">Sistema de Control de Tiempos</p>
                        </div>
                        <form id="loginForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Usuario</label>
                                <input type="text" id="username" required
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Contrase√±a</label>
                                <input type="password" id="password" required
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 font-medium">
                                Iniciar Sesi√≥n
                            </button>
                        </form>
                        <div class="mt-6 p-4 bg-gray-50 rounded text-sm text-gray-600">
                            <p class="font-medium mb-1">Credenciales de prueba:</p>
                            <p>Usuario: <span class="font-mono font-bold">admin</span></p>
                            <p>Contrase√±a: <span class="font-mono font-bold">admin123</span></p>
                        </div>
                    </div>
                </div>
            `;
        }

        function AdminDashboard() {
            return `
                <div class="min-h-screen bg-gray-100">
                    <nav class="bg-blue-900 text-white p-4 shadow-lg">
                        <div class="container mx-auto flex justify-between items-center">
                            <h1 class="text-2xl font-bold">GestorFederal - Admin</h1>
                            <button onclick="logout()" class="bg-blue-800 px-4 py-2 rounded hover:bg-blue-700">Salir</button>
                        </div>
                    </nav>
                    <div class="container mx-auto p-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <button onclick="state.view='admin-users'; render();" class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
                                <h3 class="font-bold text-lg">üë• Gestionar Usuarios</h3>
                            </button>
                            <button onclick="state.view='admin-actas'; render();" class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
                                <h3 class="font-bold text-lg">üìÑ Actas Administrativas</h3>
                            </button>
                            <button onclick="state.view='admin-bitacora'; render();" class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
                                <h3 class="font-bold text-lg">üèÜ Bit√°cora Cargos Altos</h3>
                            </button>
                            <button onclick="state.view='admin-comunicados'; render();" class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
                                <h3 class="font-bold text-lg">üì¢ Comunicados</h3>
                            </button>
                        </div>
                        ${state.comunicados.length > 0 ? `
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded">
                            <h3 class="font-bold text-yellow-800 mb-2">Comunicados Activos</h3>
                            ${state.comunicados.slice(0, 3).map(c => `<p class="text-sm text-yellow-700">‚Ä¢ ${c.titulo}</p>`).join('')}
                        </div>
                        ` : ''}
                        <div class="bg-white rounded-lg shadow p-6">
                            <h2 class="text-2xl font-bold mb-4">Estad√≠sticas Generales</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-blue-50 p-4 rounded">
                                    <p class="text-sm text-gray-600">Total Usuarios</p>
                                    <p class="text-3xl font-bold text-blue-600">${state.users.length}</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded">
                                    <p class="text-sm text-gray-600">Registros de Tiempo</p>
                                    <p class="text-3xl font-bold text-green-600">${state.timeRecords.length}</p>
                                </div>
                                <div class="bg-purple-50 p-4 rounded">
                                    <p class="text-sm text-gray-600">Actas Activas</p>
                                    <p class="text-3xl font-bold text-purple-600">${state.actas.length}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function AdminUsers() {
            return `
                <div class="min-h-screen bg-gray-100">
                    <nav class="bg-blue-900 text-white p-4 shadow-lg">
                        <div class="container mx-auto flex justify-between items-center">
                            <h1 class="text-2xl font-bold">Gesti√≥n de Usuarios</h1>
                            <button onclick="state.view='admin-dashboard'; render();" class="bg-blue-800 px-4 py-2 rounded hover:bg-blue-700">Volver</button>
                        </div>
                    </nav>
                    <div class="container mx-auto p-4">
                        <div class="bg-white rounded-lg shadow p-6 mb-6">
                            <h2 class="text-xl font-bold mb-4">Crear Nuevo Usuario</h2>
                            <form id="createUserForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input type="text" id="newUserName" placeholder="Nombre completo" class="px-4 py-2 border rounded-lg" required>
                                <input type="text" id="newUsername" placeholder="Usuario" class="px-4 py-2 border rounded-lg" required>
                                <input type="password" id="newPassword" placeholder="Contrase√±a" class="px-4 py-2 border rounded-lg" required>
                                <select id="newRole" class="px-4 py-2 border rounded-lg">
                                    <option value="bajo">Cargo Bajo</option>
                                    <option value="alto">Cargo Alto</option>
                                    <option value="admin">Admin</option>
                                </select>
                                <button type="submit" class="md:col-span-2 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Crear Usuario</button>
                            </form>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h2 class="text-xl font-bold mb-4">Lista de Usuarios</h2>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-4 py-2 text-left">Nombre</th>
                                            <th class="px-4 py-2 text-left">Usuario</th>
                                            <th class="px-4 py-2 text-left">Rol</th>
                                            <th class="px-4 py-2 text-left">Contrase√±a</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${state.users.map(u => `
                                        <tr class="border-t">
                                            <td class="px-4 py-2">${u.name}</td>
                                            <td class="px-4 py-2">${u.username}</td>
                                            <td class="px-4 py-2">
                                                <span class="px-2 py-1 rounded text-sm ${
                                                    u.role === 'admin' ? 'bg-red-100 text-red-800' :
                                                    u.role === 'alto' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'
                                                }">
                                                    ${u.role === 'admin' ? 'Admin' : u.role === 'alto' ? 'Cargo Alto' : 'Cargo Bajo'}
                                                </span>
                                            </td>
                                            <td class="px-4 py-2">${u.password}</td>
                                        </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function AdminActas() {
            return `
                <div class="min-h-screen bg-gray-100">
                    <nav class="bg-blue-900 text-white p-4 shadow-lg">
                        <div class="container mx-auto flex justify-between items-center">
                            <h1 class="text-2xl font-bold">Actas Administrativas</h1>
                            <button onclick="state.view='admin-dashboard'; render();" class="bg-blue-800 px-4 py-2 rounded hover:bg-blue-700">Volver</button>
                        </div>
                    </nav>
                    <div class="container mx-auto p-4">
                        <div class="bg-white rounded-lg shadow p-6 mb-6">
                            <h2 class="text-xl font-bold mb-4">Crear Acta Administrativa</h2>
                            <form id="createActaForm" class="space-y-4">
                                <select id="actaUserId" class="w-full px-4 py-2 border rounded-lg" required>
                                    <option value="">Seleccionar trabajador</option>
                                    ${state.users.filter(u => u.role !== 'admin').map(u => `<option value="${u.id}">${u.name}</option>`).join('')}
                                </select>
                                <textarea id="actaMotivo" placeholder="Motivo del acta" class="w-full px-4 py-2 border rounded-lg h-32" required></textarea>
                                <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700">Crear Acta</button>
                            </form>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h2 class="text-xl font-bold mb-4">Actas Registradas</h2>
                            <div class="space-y-4">
                                ${state.actas.length === 0 ? '<p class="text-gray-500 text-center py-4">No hay actas registradas</p>' :
                                state.actas.map(a => `
                                <div class="border rounded-lg p-4 bg-red-50">
                                    <h3 class="font-bold text-lg">Trabajador: ${a.targetUserName}</h3>
                                    <p class="text-sm text-gray-600">Elaborada por: ${a.createdBy}</p>
                                    <p class="text-sm text-gray-600">Fecha: ${new Date(a.createdAt).toLocaleString()}</p>
                                    <p class="text-gray-800 mt-2">${a.motivo}</p>
                                </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function AdminBitacora() {
            const stats = calculateCargoAltoHours();
            return `
                <div class="min-h-screen bg-gray-100">
                    <nav class="bg-blue-900 text-white p-4 shadow-lg">
                        <div class="container mx-auto flex justify-between items-center">
                            <h1 class="text-2xl font-bold">Bit√°cora Cargos Altos</h1>
                            <button onclick="state.view='admin-dashboard'; render();" class="bg-blue-800 px-4 py-2 rounded hover:bg-blue-700">Volver</button>
                        </div>
                    </nav>
                    <div class="container mx-auto p-4">
                        <div class="bg-white rounded-lg shadow p-6 mb-6">
                            <h2 class="text-xl font-bold mb-4">Horas Completas por Cargo Alto</h2>
                            <p class="text-sm text-gray-600 mb-4">Solo se cuentan horas completas (60 min). Minutos sobrantes se acumulan.</p>
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left">Cargo Alto</th>
                                        <th class="px-4 py-2 text-left">Horas Completas</th>
                                        <th class="px-4 py-2 text-left">Min. Pendientes</th>
                                        <th class="px-4 py-2 text-left">Total Supervisado</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${stats.length === 0 ? '<tr><td colspan="4" class="px-4 py-8 text-center text-gray-500">No hay registros</td></tr>' :
                                    stats.map(s => `
                                    <tr class="border-t">
                                        <td class="px-4 py-3 font-medium">${s.name}</td>
                                        <td class="px-4 py-3"><span class="bg-green-100 text-green-800 px-3 py-1 rounded-full font-bold">${s.completedHours}h</span></td>
                                        <td class="px-4 py-3 text-gray-600">${s.pendingMinutes} min</td>
                                        <td class="px-4 py-3 text-gray-600">${Math.floor(s.totalMinutes / 60)}h ${s.totalMinutes % 60}m</td>
                                    </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h2 class="text-xl font-bold mb-4">Todos los Registros</h2>
                            <table class="w-full text-sm">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-2 text-left">Fecha</th>
                                        <th class="px-3 py-2 text-left">Trabajador</th>
                                        <th class="px-3 py-2 text-left">Cargo Alto</th>
                                        <th class="px-3 py-2 text-left">Tiempo</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${state.timeRecords.length === 0 ? '<tr><td colspan="4" class="px-3 py-8 text-center text-gray-500">No hay registros</td></tr>' :
                                    state.timeRecords.map(r => `
                                    <tr class="border-t">
                                        <td class="px-3 py-2">${new Date(r.date).toLocaleString()}</td>
                                        <td class="px-3 py-2">${r.userName}</td>
                                        <td class="px-3 py-2">${r.cargoAltoName}</td>
                                        <td class="px-3 py-2 font-medium">${r.hours}h ${r.minutes}m</td>
                                    </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        function AdminComunicados() {
            return `
                <div class="min-h-screen bg-gray-100">
                    <nav class="bg-blue-900 text-white p-4 shadow-lg">
                        <div class="container mx-auto flex justify-between items-center">
                            <h1 class="text-2xl font-bold">Comunicados (${state.comunicados.length}/10)</h1>
                            <button onclick="state.view='admin-dashboard'; render();" class="bg-blue-800 px-4 py-2 rounded hover:bg-blue-700">Volver</button>
                        </div>
                    </nav>
                    <div class="container mx-auto p-4">
                        <div class="bg-white rounded-lg shadow p-6 mb-6">
                            <h2 class="text-xl font-bold mb-4">Crear Comunicado</h2>
                            <form id="createComForm" class="space-y-4">
                                <input type="text" id="comTitulo" placeholder="T√≠tulo del comunicado" class="w-full px-4 py-2 border rounded-lg" required>
                                <textarea id="comContenido" placeholder="Contenido" class="w-full px-4 py-2 border rounded-lg h-32" required></textarea>
                                <label class="flex items-center gap-2">
                                    <input type="checkbox" id="comUrgente" class="w-4 h-4">
                                    <span>Marcar como urgente</span>
                                </label>
                                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700" ${state.comunicados.length >= 10 ? 'disabled' : ''}>Publicar</button>
                            </form>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h2 class="text-xl font-bold mb-4">Comunicados Activos</h2>
                            <div class="space-y-4">
                                ${state.comunicados.length === 0 ? '<p class="text-gray-500 text-center py-4">No hay comunicados</p>' :
                                state.comunicados.map(c => `
                                <div class="border rounded-lg p-4 ${c.urgente ? 'bg-red-50 border-red-300' : 'bg-gray-50'}">
                                    <div class="flex justify-between items-start">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-2">
                                                <h3 class="font-bold text-lg">${c.titulo}</h3>
                                                ${c.urgente ? '<span class="bg-red-500 text-white text-xs px-2 py-1 rounded">URGENTE</span>' : ''}
                                            </div>
                                            <p class="text-sm text-gray-600">Por: ${c.createdBy} ‚Ä¢ ${new Date(c.createdAt).toLocaleString()}</p>
                                        </div>
                                        <button onclick="deleteComunicado(${c.id})" class="text-red-600 hover:text-red-800">üóëÔ∏è</button>
                                    </div>
                                    <p class="text-gray-800 mt-2">${c.contenido}</p>
                                </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
